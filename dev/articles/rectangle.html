<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Rectangling • tidyr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Rectangling">
<meta name="description" content="Rectangling is the art and craft of taking a deeply nested list (often
sourced from wild caught JSON or XML) and taming it into a tidy data set of
rows and columns. This vignette introduces you to the main rectangling tools
provided by tidyr: `unnest_longer()`, `unnest_wider()`, and `hoist()`.
">
<meta property="og:description" content="Rectangling is the art and craft of taking a deeply nested list (often
sourced from wild caught JSON or XML) and taming it into a tidy data set of
rows and columns. This vignette introduces you to the main rectangling tools
provided by tidyr: `unnest_longer()`, `unnest_wider()`, and `hoist()`.
">
<meta property="og:image" content="https://tidyr.tidyverse.org/logo.png">
<meta name="robots" content="noindex">
<script defer data-domain="tidyr.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script><script async src="https://widget.kapa.ai/kapa-widget.bundle.js" data-button-hide="true" data-modal-disclaimer="This is a custom LLM for answering questions about dplyr, tidyr, and ggplot2. Answers are based on the contents of the documentation. Rate the answers to let us know what you think!" data-modal-ask-ai-input-placeholder="Ask me a question about dplyr, tidyr, or ggplot2." data-modal-header-bg-color="#f9f9f9" data-modal-override-open-class="open-kapa-widget" data-project-color="#365a7a" data-project-name="tidyr" data-modal-title="tidyverse AI ✨" data-project-logo="https://avatars.githubusercontent.com/u/22032646?s=200&amp;u=235532df5cf8543246812f73db051b793f868807&amp;v=4" data-user-analytics-fingerprint-enabled="true" data-bot-protection-mechanism="hcaptcha" data-website-id="34242a59-6aeb-4105-9065-86e16bf56a0f"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidyr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/tidy-data.html">Tidy data</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/pivot.html">Pivoting</a></li>
    <li><a class="dropdown-item" href="../articles/rectangle.html">Rectangling</a></li>
    <li><a class="dropdown-item" href="../articles/nest.html">Nested data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2023/01/tidyr-1-3-0/">Version 1.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2022/02/tidyr-1-2-0/">Version 1.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/05/tidyr-1.1.0/">Version 1.1.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/09/tidyr-1-0-0/">Version 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/02/tidyr-0-8-0/">Version 0.8.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2017/08/tidyr-0.7.0/">Version 0.7.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/tidyr-0-6-0/">Version 0.6.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/tidyr-0-5-0/">Version 0.5.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/tidyr-0-4-0/">Version 0.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/tidyr-0-3-0/">Version 0.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/tidyr-0-2-0/">Version 0.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://posit.co/blog/introducing-tidyr/">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/tidyr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link open-kapa-widget" href="../#">Ask AI ✨</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Rectangling</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/tidyr/blob/main/vignettes/rectangle.Rmd" class="external-link"><code>vignettes/rectangle.Rmd</code></a></small>
      <div class="d-none name"><code>rectangle.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Rectangling is the art and craft of taking a deeply nested list
(often sourced from wild caught JSON or XML) and taming it into a tidy
data set of rows and columns. There are three functions from tidyr that
are particularly useful for rectangling:</p>
<ul>
<li>
<code><a href="../reference/unnest_longer.html">unnest_longer()</a></code> takes each element of a list-column and
makes a new row.</li>
<li>
<code><a href="../reference/unnest_wider.html">unnest_wider()</a></code> takes each element of a list-column and
makes a new column.</li>
<li>
<code><a href="../reference/hoist.html">hoist()</a></code> is similar to <code><a href="../reference/unnest_wider.html">unnest_wider()</a></code> but
only plucks out selected components, and can reach down multiple
levels.</li>
</ul>
<p>(Alternative, for complex inputs where you need to rectangle a nested
list according to a specification, see the <a href="https://github.com/mgirlich/tibblify" class="external-link">tibblify</a> package.)</p>
<p>A very large number of data rectangling problems can be solved by
combining <code><a href="https://jeroen.r-universe.dev/jsonlite/reference/read_json.html" class="external-link">jsonlite::read_json()</a></code> with these functions and a
splash of dplyr (largely eliminating prior approaches that combined
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> with multiple <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code>s). Note
that jsonlite has another important function called
<code>fromJSON()</code>. We don’t recommend it here because it performs
its own automatic simplification (<code>simplifyVector = TRUE</code>).
This often works well, particularly in simple cases, but we think you’re
better off doing the rectangling yourself so you know exactly what’s
happening and can more easily handle the most complicated nested
structures.</p>
<p>To illustrate these techniques, we’ll use the repurrrsive package,
which provides a number deeply nested lists originally mostly captured
from web APIs.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jennybc.github.io/repurrrsive/" class="external-link">repurrrsive</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="github-users">GitHub users<a class="anchor" aria-label="anchor" href="#github-users"></a>
</h2>
<p>We’ll start with <code>gh_users</code>, a list which contains
information about six GitHub users. To begin, we put the
<code>gh_users</code> list into a data frame:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">users</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>user <span class="op">=</span> <span class="va">gh_users</span><span class="op">)</span></span></code></pre></div>
<p>This seems a bit counter-intuitive: why is the first step in making a
list simpler to make it more complicated? But a data frame has a big
advantage: it bundles together multiple vectors so that everything is
tracked together in a single object.</p>
<p>Each <code>user</code> is a named list, where each element represents
a column.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">users</span><span class="op">$</span><span class="va">user</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "login"               "id"                  "avatar_url"         </span></span>
<span><span class="co">#&gt;  [4] "gravatar_id"         "url"                 "html_url"           </span></span>
<span><span class="co">#&gt;  [7] "followers_url"       "following_url"       "gists_url"          </span></span>
<span><span class="co">#&gt; [10] "starred_url"         "subscriptions_url"   "organizations_url"  </span></span>
<span><span class="co">#&gt; [13] "repos_url"           "events_url"          "received_events_url"</span></span>
<span><span class="co">#&gt; [16] "type"                "site_admin"          "name"               </span></span>
<span><span class="co">#&gt; [19] "company"             "blog"                "location"           </span></span>
<span><span class="co">#&gt; [22] "email"               "hireable"            "bio"                </span></span>
<span><span class="co">#&gt; [25] "public_repos"        "public_gists"        "followers"          </span></span>
<span><span class="co">#&gt; [28] "following"           "created_at"          "updated_at"</span></span></code></pre></div>
<p>There are two ways to turn the list components into columns.
<code><a href="../reference/unnest_wider.html">unnest_wider()</a></code> takes every component and makes a new
column:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">users</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">user</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 30</span></span></span>
<span><span class="co">#&gt;   login          id avatar_url gravatar_id url   html_url followers_url</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> gaborcsar… 6.60<span style="color: #949494;">e</span>5 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> jennybc    5.99<span style="color: #949494;">e</span>5 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> jtleek     1.57<span style="color: #949494;">e</span>6 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> juliasilge 1.25<span style="color: #949494;">e</span>7 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> leeper     3.51<span style="color: #949494;">e</span>6 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> masalmon   8.36<span style="color: #949494;">e</span>6 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 23 more variables: following_url &lt;chr&gt;, gists_url &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   starred_url &lt;chr&gt;, subscriptions_url &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   organizations_url &lt;chr&gt;, repos_url &lt;chr&gt;, events_url &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   received_events_url &lt;chr&gt;, type &lt;chr&gt;, site_admin &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   name &lt;chr&gt;, company &lt;chr&gt;, blog &lt;chr&gt;, location &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   email &lt;chr&gt;, hireable &lt;lgl&gt;, bio &lt;chr&gt;, public_repos &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   public_gists &lt;int&gt;, followers &lt;int&gt;, following &lt;int&gt;, …</span></span></span></code></pre></div>
<p>But in this case, there are many components and we don’t need most of
them so we can instead use <code><a href="../reference/hoist.html">hoist()</a></code>. <code><a href="../reference/hoist.html">hoist()</a></code>
allows us to pull out selected components using the same syntax as
<code><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">purrr::pluck()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">users</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/hoist.html">hoist</a></span><span class="op">(</span><span class="va">user</span>,</span>
<span>  followers <span class="op">=</span> <span class="st">"followers"</span>,</span>
<span>  login <span class="op">=</span> <span class="st">"login"</span>,</span>
<span>  url <span class="op">=</span> <span class="st">"html_url"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   followers login       url                            user        </span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       303 gaborcsardi https://github.com/gaborcsardi <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       780 jennybc     https://github.com/jennybc     <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>      <span style="text-decoration: underline;">3</span>958 jtleek      https://github.com/jtleek      <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       115 juliasilge  https://github.com/juliasilge  <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>       213 leeper      https://github.com/leeper      <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>        34 masalmon    https://github.com/masalmon    <span style="color: #949494;">&lt;named list&gt;</span></span></span></code></pre></div>
<p><code><a href="../reference/hoist.html">hoist()</a></code> removes the named components from the
<code>user</code> list-column, so you can think of it as moving
components out of the inner list into the top-level data frame.</p>
</div>
<div class="section level2">
<h2 id="github-repos">GitHub repos<a class="anchor" aria-label="anchor" href="#github-repos"></a>
</h2>
<p>We start off <code>gh_repos</code> similarly, by putting it in a
tibble:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="va">gh_repos</span><span class="op">)</span></span>
<span><span class="va">repos</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 1</span></span></span>
<span><span class="co">#&gt;   repo       </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">&lt;list [30]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> <span style="color: #949494;">&lt;list [30]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> <span style="color: #949494;">&lt;list [30]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> <span style="color: #949494;">&lt;list [26]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> <span style="color: #949494;">&lt;list [30]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> <span style="color: #949494;">&lt;list [30]&gt;</span></span></span></code></pre></div>
<p>This time the elements of <code>repos</code> are a list of
repositories that belong to that user. These are observations, so should
become new rows, so we use <code><a href="../reference/unnest_longer.html">unnest_longer()</a></code> rather than
<code><a href="../reference/unnest_wider.html">unnest_wider()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repos</span> <span class="op">&lt;-</span> <span class="va">repos</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/unnest_longer.html">unnest_longer</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span><span class="va">repos</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 176 × 1</span></span></span>
<span><span class="co">#&gt;    repo             </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> <span style="color: #949494;">&lt;named list [68]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> <span style="color: #949494;">&lt;named list [68]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> <span style="color: #949494;">&lt;named list [68]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> <span style="color: #949494;">&lt;named list [68]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> <span style="color: #949494;">&lt;named list [68]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> <span style="color: #949494;">&lt;named list [68]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> <span style="color: #949494;">&lt;named list [68]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> <span style="color: #949494;">&lt;named list [68]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> <span style="color: #949494;">&lt;named list [68]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> <span style="color: #949494;">&lt;named list [68]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 166 more rows</span></span></span></code></pre></div>
<p>Then we can use <code><a href="../reference/unnest_wider.html">unnest_wider()</a></code> or
<code><a href="../reference/hoist.html">hoist()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repos</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/hoist.html">hoist</a></span><span class="op">(</span><span class="va">repo</span>,</span>
<span>  login <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"owner"</span>, <span class="st">"login"</span><span class="op">)</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"name"</span>,</span>
<span>  homepage <span class="op">=</span> <span class="st">"homepage"</span>,</span>
<span>  watchers <span class="op">=</span> <span class="st">"watchers_count"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 176 × 5</span></span></span>
<span><span class="co">#&gt;    login       name        homepage watchers repo             </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> gaborcsardi after       <span style="color: #BB0000;">NA</span>              5 <span style="color: #949494;">&lt;named list [65]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> gaborcsardi argufy      <span style="color: #BB0000;">NA</span>             19 <span style="color: #949494;">&lt;named list [65]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> gaborcsardi ask         <span style="color: #BB0000;">NA</span>              5 <span style="color: #949494;">&lt;named list [65]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> gaborcsardi baseimports <span style="color: #BB0000;">NA</span>              0 <span style="color: #949494;">&lt;named list [65]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> gaborcsardi citest      <span style="color: #BB0000;">NA</span>              0 <span style="color: #949494;">&lt;named list [65]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> gaborcsardi clisymbols  <span style="color: #949494;">""</span>             18 <span style="color: #949494;">&lt;named list [65]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> gaborcsardi cmaker      <span style="color: #BB0000;">NA</span>              0 <span style="color: #949494;">&lt;named list [65]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> gaborcsardi cmark       <span style="color: #BB0000;">NA</span>              0 <span style="color: #949494;">&lt;named list [65]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> gaborcsardi conditions  <span style="color: #BB0000;">NA</span>              0 <span style="color: #949494;">&lt;named list [65]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> gaborcsardi crayon      <span style="color: #BB0000;">NA</span>             52 <span style="color: #949494;">&lt;named list [65]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 166 more rows</span></span></span></code></pre></div>
<p>Note the use of <code>c("owner", "login")</code>: this allows us to
reach two levels deep inside of a list. An alternative approach would be
to pull out just <code>owner</code> and then put each element of it in a
column:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repos</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hoist.html">hoist</a></span><span class="op">(</span><span class="va">repo</span>, owner <span class="op">=</span> <span class="st">"owner"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">owner</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 176 × 18</span></span></span>
<span><span class="co">#&gt;    login         id avatar_url gravatar_id url   html_url followers_url</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> gaborcsa… <span style="text-decoration: underline;">660</span>288 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> gaborcsa… <span style="text-decoration: underline;">660</span>288 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> gaborcsa… <span style="text-decoration: underline;">660</span>288 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> gaborcsa… <span style="text-decoration: underline;">660</span>288 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> gaborcsa… <span style="text-decoration: underline;">660</span>288 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> gaborcsa… <span style="text-decoration: underline;">660</span>288 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> gaborcsa… <span style="text-decoration: underline;">660</span>288 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> gaborcsa… <span style="text-decoration: underline;">660</span>288 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> gaborcsa… <span style="text-decoration: underline;">660</span>288 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> gaborcsa… <span style="text-decoration: underline;">660</span>288 https://a… <span style="color: #949494;">""</span>          http… https:/… https://api.…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 166 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more variables: following_url &lt;chr&gt;, gists_url &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   starred_url &lt;chr&gt;, subscriptions_url &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   organizations_url &lt;chr&gt;, repos_url &lt;chr&gt;, events_url &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   received_events_url &lt;chr&gt;, type &lt;chr&gt;, site_admin &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   repo &lt;list&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="game-of-thrones-characters">Game of Thrones characters<a class="anchor" aria-label="anchor" href="#game-of-thrones-characters"></a>
</h2>
<p><code>got_chars</code> has a similar structure to
<code>gh_users</code>: it’s a list of named lists, where each element of
the inner list describes some attribute of a GoT character. We start in
the same way, first by creating a data frame and then by unnesting each
component into a column:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>char <span class="op">=</span> <span class="va">got_chars</span><span class="op">)</span></span>
<span><span class="va">chars</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 × 1</span></span></span>
<span><span class="co">#&gt;    char             </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> <span style="color: #949494;">&lt;named list [18]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> <span style="color: #949494;">&lt;named list [18]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> <span style="color: #949494;">&lt;named list [18]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> <span style="color: #949494;">&lt;named list [18]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> <span style="color: #949494;">&lt;named list [18]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> <span style="color: #949494;">&lt;named list [18]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> <span style="color: #949494;">&lt;named list [18]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> <span style="color: #949494;">&lt;named list [18]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> <span style="color: #949494;">&lt;named list [18]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> <span style="color: #949494;">&lt;named list [18]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20 more rows</span></span></span>
<span></span>
<span><span class="va">chars2</span> <span class="op">&lt;-</span> <span class="va">chars</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">char</span><span class="op">)</span></span>
<span><span class="va">chars2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 × 18</span></span></span>
<span><span class="co">#&gt;    url         id name  gender culture born  died  alive titles aliases</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> https:/…  <span style="text-decoration: underline;">1</span>022 Theo… Male   <span style="color: #949494;">"</span>Ironb… <span style="color: #949494;">"</span>In … <span style="color: #949494;">""</span>    TRUE  <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> https:/…  <span style="text-decoration: underline;">1</span>052 Tyri… Male   <span style="color: #949494;">""</span>      <span style="color: #949494;">"</span>In … <span style="color: #949494;">""</span>    TRUE  <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> https:/…  <span style="text-decoration: underline;">1</span>074 Vict… Male   <span style="color: #949494;">"</span>Ironb… <span style="color: #949494;">"</span>In … <span style="color: #949494;">""</span>    TRUE  <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> https:/…  <span style="text-decoration: underline;">1</span>109 Will  Male   <span style="color: #949494;">""</span>      <span style="color: #949494;">""</span>    <span style="color: #949494;">"</span>In … FALSE <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> https:/…  <span style="text-decoration: underline;">1</span>166 Areo… Male   <span style="color: #949494;">"</span>Norvo… <span style="color: #949494;">"</span>In … <span style="color: #949494;">""</span>    TRUE  <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> https:/…  <span style="text-decoration: underline;">1</span>267 Chett Male   <span style="color: #949494;">""</span>      <span style="color: #949494;">"</span>At … <span style="color: #949494;">"</span>In … FALSE <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> https:/…  <span style="text-decoration: underline;">1</span>295 Cres… Male   <span style="color: #949494;">""</span>      <span style="color: #949494;">"</span>In … <span style="color: #949494;">"</span>In … FALSE <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> https:/…   130 Aria… Female <span style="color: #949494;">"</span>Dorni… <span style="color: #949494;">"</span>In … <span style="color: #949494;">""</span>    TRUE  <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> https:/…  <span style="text-decoration: underline;">1</span>303 Daen… Female <span style="color: #949494;">"</span>Valyr… <span style="color: #949494;">"</span>In … <span style="color: #949494;">""</span>    TRUE  <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> https:/…  <span style="text-decoration: underline;">1</span>319 Davo… Male   <span style="color: #949494;">"</span>Weste… <span style="color: #949494;">"</span>In … <span style="color: #949494;">""</span>    TRUE  <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: father &lt;chr&gt;, mother &lt;chr&gt;, spouse &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   allegiances &lt;list&gt;, books &lt;list&gt;, povBooks &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   tvSeries &lt;list&gt;, playedBy &lt;list&gt;</span></span></span></code></pre></div>
<p>This is more complex than <code>gh_users</code> because some
component of <code>char</code> are themselves a list, giving us a
collection of list-columns:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chars2</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_if</a></span><span class="op">(</span><span class="va">is.list</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 × 7</span></span></span>
<span><span class="co">#&gt;    titles    aliases    allegiances books  povBooks  tvSeries  playedBy</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #949494;">&lt;chr [4]&gt;</span>  <span style="color: #949494;">&lt;chr [1]&gt;</span>   <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #949494;">&lt;chr [6]&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #949494;">&lt;chr [11]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span>   <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr [4]&gt;</span> <span style="color: #949494;">&lt;chr [6]&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span>  <span style="color: #949494;">&lt;chr [1]&gt;</span>   <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span>  <span style="color: #949494;">&lt;NULL&gt;</span>      <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span>  <span style="color: #949494;">&lt;chr [1]&gt;</span>   <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span>  <span style="color: #949494;">&lt;NULL&gt;</span>      <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span>  <span style="color: #949494;">&lt;NULL&gt;</span>      <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span>  <span style="color: #949494;">&lt;chr [1]&gt;</span>   <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> <span style="color: #949494;">&lt;chr [5]&gt;</span> <span style="color: #949494;">&lt;chr [11]&gt;</span> <span style="color: #949494;">&lt;chr [1]&gt;</span>   <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr [4]&gt;</span> <span style="color: #949494;">&lt;chr [6]&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> <span style="color: #949494;">&lt;chr [4]&gt;</span> <span style="color: #949494;">&lt;chr [5]&gt;</span>  <span style="color: #949494;">&lt;chr [2]&gt;</span>   <span style="color: #949494;">&lt;chr&gt;</span>  <span style="color: #949494;">&lt;chr [3]&gt;</span> <span style="color: #949494;">&lt;chr [5]&gt;</span> <span style="color: #949494;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 20 more rows</span></span></span></code></pre></div>
<p>What you do next will depend on the purposes of the analysis. Maybe
you want a row for every book and TV series that the character appears
in:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chars2</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">books</span>, <span class="va">tvSeries</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">books</span>, <span class="va">tvSeries</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">"media"</span>, values_to <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_longer.html">unnest_longer</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 179 × 3</span></span></span>
<span><span class="co">#&gt;    name             media    value            </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Theon Greyjoy    books    A Game of Thrones</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Theon Greyjoy    books    A Storm of Swords</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Theon Greyjoy    books    A Feast for Crows</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Theon Greyjoy    tvSeries Season 1         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Theon Greyjoy    tvSeries Season 2         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Theon Greyjoy    tvSeries Season 3         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Theon Greyjoy    tvSeries Season 4         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Theon Greyjoy    tvSeries Season 5         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Theon Greyjoy    tvSeries Season 6         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Tyrion Lannister books    A Feast for Crows</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 169 more rows</span></span></span></code></pre></div>
<p>Or maybe you want to build a table that lets you match title to
name:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chars2</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">name</span>, title <span class="op">=</span> <span class="va">titles</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_longer.html">unnest_longer</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 59 × 2</span></span></span>
<span><span class="co">#&gt;    name              title                                             </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Theon Greyjoy     <span style="color: #949494;">"</span>Prince of Winterfell<span style="color: #949494;">"</span>                            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Theon Greyjoy     <span style="color: #949494;">"</span>Lord of the Iron Islands (by law of the green la…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Tyrion Lannister  <span style="color: #949494;">"</span>Acting Hand of the King (former)<span style="color: #949494;">"</span>                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Tyrion Lannister  <span style="color: #949494;">"</span>Master of Coin (former)<span style="color: #949494;">"</span>                         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Victarion Greyjoy <span style="color: #949494;">"</span>Lord Captain of the Iron Fleet<span style="color: #949494;">"</span>                  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Victarion Greyjoy <span style="color: #949494;">"</span>Master of the Iron Victory<span style="color: #949494;">"</span>                      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Will              <span style="color: #949494;">""</span>                                                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Areo Hotah        <span style="color: #949494;">"</span>Captain of the Guard at Sunspear<span style="color: #949494;">"</span>                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Chett             <span style="color: #949494;">""</span>                                                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Cressen           <span style="color: #949494;">"</span>Maester<span style="color: #949494;">"</span>                                         </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 49 more rows</span></span></span></code></pre></div>
<p>(Note that the empty titles (<code>""</code>) are due to an
infelicity in the input <code>got_chars</code>: ideally people without
titles would have a title vector of length 0, not a title vector of
length 1 containing an empty string.)</p>
</div>
<div class="section level2">
<h2 id="geocoding-with-google">Geocoding with google<a class="anchor" aria-label="anchor" href="#geocoding-with-google"></a>
</h2>
<p>Next we’ll tackle a more complex form of data that comes from
Google’s geocoding service, stored in the repurrrsive package</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">repurrrsive</span><span class="fu">::</span><span class="va"><a href="https://jennybc.github.io/repurrrsive/reference/gmaps_cities.html" class="external-link">gmaps_cities</a></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">#&gt;   city       json            </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Houston    <span style="color: #949494;">&lt;named list [2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Washington <span style="color: #949494;">&lt;named list [2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> New York   <span style="color: #949494;">&lt;named list [2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Chicago    <span style="color: #949494;">&lt;named list [2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Arlington  <span style="color: #949494;">&lt;named list [2]&gt;</span></span></span></code></pre></div>
<p><code>json</code> is a list-column of named lists, so it makes sense
to start with <code><a href="../reference/unnest_wider.html">unnest_wider()</a></code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">repurrrsive</span><span class="fu">::</span><span class="va"><a href="https://jennybc.github.io/repurrrsive/reference/gmaps_cities.html" class="external-link">gmaps_cities</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">json</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   city       results    status</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Houston    <span style="color: #949494;">&lt;list [1]&gt;</span> OK    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Washington <span style="color: #949494;">&lt;list [2]&gt;</span> OK    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> New York   <span style="color: #949494;">&lt;list [1]&gt;</span> OK    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Chicago    <span style="color: #949494;">&lt;list [1]&gt;</span> OK    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Arlington  <span style="color: #949494;">&lt;list [2]&gt;</span> OK</span></span></code></pre></div>
<p>Notice that <code>results</code> is a list of lists. Most of the
cities have 1 element (representing a unique match from the geocoding
API), but Washington and Arlington have two. We can pull these out into
separate rows with <code><a href="../reference/unnest_longer.html">unnest_longer()</a></code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">repurrrsive</span><span class="fu">::</span><span class="va"><a href="https://jennybc.github.io/repurrrsive/reference/gmaps_cities.html" class="external-link">gmaps_cities</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">json</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_longer.html">unnest_longer</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 3</span></span></span>
<span><span class="co">#&gt;   city       results          status</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Houston    <span style="color: #949494;">&lt;named list [5]&gt;</span> OK    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Washington <span style="color: #949494;">&lt;named list [5]&gt;</span> OK    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Washington <span style="color: #949494;">&lt;named list [5]&gt;</span> OK    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> New York   <span style="color: #949494;">&lt;named list [5]&gt;</span> OK    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Chicago    <span style="color: #949494;">&lt;named list [5]&gt;</span> OK    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Arlington  <span style="color: #949494;">&lt;named list [5]&gt;</span> OK    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Arlington  <span style="color: #949494;">&lt;named list [5]&gt;</span> OK</span></span></code></pre></div>
<p>Now these all have the same components, as revealed by
<code><a href="../reference/unnest_wider.html">unnest_wider()</a></code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">repurrrsive</span><span class="fu">::</span><span class="va"><a href="https://jennybc.github.io/repurrrsive/reference/gmaps_cities.html" class="external-link">gmaps_cities</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">json</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_longer.html">unnest_longer</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 7</span></span></span>
<span><span class="co">#&gt;   city       address_components formatted_address geometry     place_id</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Houston    <span style="color: #949494;">&lt;list [4]&gt;</span>         Houston, TX, USA  <span style="color: #949494;">&lt;named list&gt;</span> ChIJAYW…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Washington <span style="color: #949494;">&lt;list [2]&gt;</span>         Washington, USA   <span style="color: #949494;">&lt;named list&gt;</span> ChIJ-bD…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Washington <span style="color: #949494;">&lt;list [4]&gt;</span>         Washington, DC, … <span style="color: #949494;">&lt;named list&gt;</span> ChIJW-T…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> New York   <span style="color: #949494;">&lt;list [3]&gt;</span>         New York, NY, USA <span style="color: #949494;">&lt;named list&gt;</span> ChIJOwg…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Chicago    <span style="color: #949494;">&lt;list [4]&gt;</span>         Chicago, IL, USA  <span style="color: #949494;">&lt;named list&gt;</span> ChIJ7cv…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Arlington  <span style="color: #949494;">&lt;list [4]&gt;</span>         Arlington, TX, U… <span style="color: #949494;">&lt;named list&gt;</span> ChIJ05g…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Arlington  <span style="color: #949494;">&lt;list [4]&gt;</span>         Arlington, VA, U… <span style="color: #949494;">&lt;named list&gt;</span> ChIJD6e…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: types &lt;list&gt;, status &lt;chr&gt;</span></span></span></code></pre></div>
<p>We can find the latitude and longitude by unnesting
<code>geometry</code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">repurrrsive</span><span class="fu">::</span><span class="va"><a href="https://jennybc.github.io/repurrrsive/reference/gmaps_cities.html" class="external-link">gmaps_cities</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">json</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_longer.html">unnest_longer</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">geometry</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 10</span></span></span>
<span><span class="co">#&gt;   city   address_components formatted_address bounds       location    </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Houst… <span style="color: #949494;">&lt;list [4]&gt;</span>         Houston, TX, USA  <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Washi… <span style="color: #949494;">&lt;list [2]&gt;</span>         Washington, USA   <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Washi… <span style="color: #949494;">&lt;list [4]&gt;</span>         Washington, DC, … <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> New Y… <span style="color: #949494;">&lt;list [3]&gt;</span>         New York, NY, USA <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Chica… <span style="color: #949494;">&lt;list [4]&gt;</span>         Chicago, IL, USA  <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Arlin… <span style="color: #949494;">&lt;list [4]&gt;</span>         Arlington, TX, U… <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Arlin… <span style="color: #949494;">&lt;list [4]&gt;</span>         Arlington, VA, U… <span style="color: #949494;">&lt;named list&gt;</span> <span style="color: #949494;">&lt;named list&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: location_type &lt;chr&gt;, viewport &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   place_id &lt;chr&gt;, types &lt;list&gt;, status &lt;chr&gt;</span></span></span></code></pre></div>
<p>And then location:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">repurrrsive</span><span class="fu">::</span><span class="va"><a href="https://jennybc.github.io/repurrrsive/reference/gmaps_cities.html" class="external-link">gmaps_cities</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">json</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_longer.html">unnest_longer</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">geometry</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">location</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 11</span></span></span>
<span><span class="co">#&gt;   city   address_components formatted_address bounds         lat    lng</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Houst… <span style="color: #949494;">&lt;list [4]&gt;</span>         Houston, TX, USA  <span style="color: #949494;">&lt;named list&gt;</span>  29.8  -<span style="color: #BB0000;">95.4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Washi… <span style="color: #949494;">&lt;list [2]&gt;</span>         Washington, USA   <span style="color: #949494;">&lt;named list&gt;</span>  47.8 -<span style="color: #BB0000;">121.</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Washi… <span style="color: #949494;">&lt;list [4]&gt;</span>         Washington, DC, … <span style="color: #949494;">&lt;named list&gt;</span>  38.9  -<span style="color: #BB0000;">77.0</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> New Y… <span style="color: #949494;">&lt;list [3]&gt;</span>         New York, NY, USA <span style="color: #949494;">&lt;named list&gt;</span>  40.7  -<span style="color: #BB0000;">74.0</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Chica… <span style="color: #949494;">&lt;list [4]&gt;</span>         Chicago, IL, USA  <span style="color: #949494;">&lt;named list&gt;</span>  41.9  -<span style="color: #BB0000;">87.6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Arlin… <span style="color: #949494;">&lt;list [4]&gt;</span>         Arlington, TX, U… <span style="color: #949494;">&lt;named list&gt;</span>  32.7  -<span style="color: #BB0000;">97.1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Arlin… <span style="color: #949494;">&lt;list [4]&gt;</span>         Arlington, VA, U… <span style="color: #949494;">&lt;named list&gt;</span>  38.9  -<span style="color: #BB0000;">77.1</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: location_type &lt;chr&gt;, viewport &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   place_id &lt;chr&gt;, types &lt;list&gt;, status &lt;chr&gt;</span></span></span></code></pre></div>
<p>We could also just look at the first address for each city:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">repurrrsive</span><span class="fu">::</span><span class="va"><a href="https://jennybc.github.io/repurrrsive/reference/gmaps_cities.html" class="external-link">gmaps_cities</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">json</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hoist.html">hoist</a></span><span class="op">(</span><span class="va">results</span>, first_result <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">first_result</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">geometry</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">location</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 12</span></span></span>
<span><span class="co">#&gt;   city   address_components formatted_address bounds         lat    lng</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Houst… <span style="color: #949494;">&lt;list [4]&gt;</span>         Houston, TX, USA  <span style="color: #949494;">&lt;named list&gt;</span>  29.8  -<span style="color: #BB0000;">95.4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Washi… <span style="color: #949494;">&lt;list [2]&gt;</span>         Washington, USA   <span style="color: #949494;">&lt;named list&gt;</span>  47.8 -<span style="color: #BB0000;">121.</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> New Y… <span style="color: #949494;">&lt;list [3]&gt;</span>         New York, NY, USA <span style="color: #949494;">&lt;named list&gt;</span>  40.7  -<span style="color: #BB0000;">74.0</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Chica… <span style="color: #949494;">&lt;list [4]&gt;</span>         Chicago, IL, USA  <span style="color: #949494;">&lt;named list&gt;</span>  41.9  -<span style="color: #BB0000;">87.6</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Arlin… <span style="color: #949494;">&lt;list [4]&gt;</span>         Arlington, TX, U… <span style="color: #949494;">&lt;named list&gt;</span>  32.7  -<span style="color: #BB0000;">97.1</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6 more variables: location_type &lt;chr&gt;, viewport &lt;list&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   place_id &lt;chr&gt;, types &lt;list&gt;, results &lt;list&gt;, status &lt;chr&gt;</span></span></span></code></pre></div>
<p>Or use <code><a href="../reference/hoist.html">hoist()</a></code> to dive deeply to get directly to
<code>lat</code> and <code>lng</code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">repurrrsive</span><span class="fu">::</span><span class="va"><a href="https://jennybc.github.io/repurrrsive/reference/gmaps_cities.html" class="external-link">gmaps_cities</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hoist.html">hoist</a></span><span class="op">(</span><span class="va">json</span>,</span>
<span>    lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"results"</span>, <span class="fl">1</span>, <span class="st">"geometry"</span>, <span class="st">"location"</span>, <span class="st">"lat"</span><span class="op">)</span>,</span>
<span>    lng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"results"</span>, <span class="fl">1</span>, <span class="st">"geometry"</span>, <span class="st">"location"</span>, <span class="st">"lng"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   city         lat    lng json            </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Houston     29.8  -<span style="color: #BB0000;">95.4</span> <span style="color: #949494;">&lt;named list [2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Washington  47.8 -<span style="color: #BB0000;">121.</span>  <span style="color: #949494;">&lt;named list [2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> New York    40.7  -<span style="color: #BB0000;">74.0</span> <span style="color: #949494;">&lt;named list [2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Chicago     41.9  -<span style="color: #BB0000;">87.6</span> <span style="color: #949494;">&lt;named list [2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Arlington   32.7  -<span style="color: #BB0000;">97.1</span> <span style="color: #949494;">&lt;named list [2]&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="sharla-gelfands-discography">Sharla Gelfand’s discography<a class="anchor" aria-label="anchor" href="#sharla-gelfands-discography"></a>
</h2>
<p>We’ll finish off with the most complex list, from <a href="https://github.com/sharlagelfand" class="external-link">Sharla Gelfand’s</a>
discography. We’ll start the usual way: putting the list into a single
column data frame, and then widening so each component is a column. I
also parse the <code>date_added</code> column into a real date-time<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;I’d normally use &lt;code&gt;&lt;a href="https://readr.tidyverse.org/reference/parse_datetime.html" class="external-link"&gt;readr::parse_datetime()&lt;/a&gt;&lt;/code&gt; or
&lt;code&gt;lubridate::ymd_hms()&lt;/code&gt;, but I can’t here because it’s a
vignette and I don’t want to add a dependency to tidyr just to simplify
one example.&lt;/p&gt;'><sup>1</sup></a>.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">discs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>disc <span class="op">=</span> <span class="va">discog</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">disc</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>date_added <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></span><span class="op">(</span><span class="va">date_added</span>, <span class="st">"%Y-%m-%dT%H:%M:%S"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">discs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 155 × 5</span></span></span>
<span><span class="co">#&gt;    instance_id date_added          basic_information       id rating</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   354<span style="text-decoration: underline;">823</span>933 2019-02-16 <span style="color: #949494;">17:48:59</span> <span style="color: #949494;">&lt;named list [11]&gt;</span>  7<span style="text-decoration: underline;">496</span>378      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   354<span style="text-decoration: underline;">092</span>601 2019-02-13 <span style="color: #949494;">14:13:11</span> <span style="color: #949494;">&lt;named list [11]&gt;</span>  4<span style="text-decoration: underline;">490</span>852      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   354<span style="text-decoration: underline;">091</span>476 2019-02-13 <span style="color: #949494;">14:07:23</span> <span style="color: #949494;">&lt;named list [11]&gt;</span>  9<span style="text-decoration: underline;">827</span>276      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   351<span style="text-decoration: underline;">244</span>906 2019-02-02 <span style="color: #949494;">11:39:58</span> <span style="color: #949494;">&lt;named list [11]&gt;</span>  9<span style="text-decoration: underline;">769</span>203      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   351<span style="text-decoration: underline;">244</span>801 2019-02-02 <span style="color: #949494;">11:39:37</span> <span style="color: #949494;">&lt;named list [11]&gt;</span>  7<span style="text-decoration: underline;">237</span>138      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   351<span style="text-decoration: underline;">052</span>065 2019-02-01 <span style="color: #949494;">20:40:53</span> <span style="color: #949494;">&lt;named list [11]&gt;</span> 13<span style="text-decoration: underline;">117</span>042      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   350<span style="text-decoration: underline;">315</span>345 2019-01-29 <span style="color: #949494;">15:48:37</span> <span style="color: #949494;">&lt;named list [11]&gt;</span>  7<span style="text-decoration: underline;">113</span>575      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   350<span style="text-decoration: underline;">315</span>103 2019-01-29 <span style="color: #949494;">15:47:22</span> <span style="color: #949494;">&lt;named list [11]&gt;</span> 10<span style="text-decoration: underline;">540</span>713      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   350<span style="text-decoration: underline;">314</span>507 2019-01-29 <span style="color: #949494;">15:44:08</span> <span style="color: #949494;">&lt;named list [11]&gt;</span> 11<span style="text-decoration: underline;">260</span>950      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   350<span style="text-decoration: underline;">314</span>047 2019-01-29 <span style="color: #949494;">15:41:35</span> <span style="color: #949494;">&lt;named list [11]&gt;</span> 11<span style="text-decoration: underline;">726</span>853      0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 145 more rows</span></span></span></code></pre></div>
<p>At this level, we see information about when each disc was added to
Sharla’s discography, not any information about the disc itself. To do
that we need to widen the <code>basic_information</code> column:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">discs</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">basic_information</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `unnest_wider()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Can't duplicate names between the affected columns and the</span></span>
<span><span class="co">#&gt;   original data.</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> These names are duplicated:</span></span>
<span><span class="co">#&gt;   <span style="color: #00BBBB;">ℹ</span> `id`, from `basic_information`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `names_sep` to disambiguate using the column name.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Or use `names_repair` to specify a repair strategy.</span></span></code></pre></div>
<p>Unfortunately that fails because there’s an <code>id</code> column
inside <code>basic_information</code>. We can quickly see what’s going
on by setting <code>names_repair = "unique"</code>:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">discs</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">basic_information</span>, names_repair <span class="op">=</span> <span class="st">"unique"</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `id` -&gt; `id...7`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `id` -&gt; `id...14`</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 155 × 15</span></span></span>
<span><span class="co">#&gt;    instance_id date_added          labels      year master_url  artists</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   354<span style="text-decoration: underline;">823</span>933 2019-02-16 <span style="color: #949494;">17:48:59</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>015 <span style="color: #BB0000;">NA</span>          <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   354<span style="text-decoration: underline;">092</span>601 2019-02-13 <span style="color: #949494;">14:13:11</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>013 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   354<span style="text-decoration: underline;">091</span>476 2019-02-13 <span style="color: #949494;">14:07:23</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>017 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   351<span style="text-decoration: underline;">244</span>906 2019-02-02 <span style="color: #949494;">11:39:58</span> <span style="color: #949494;">&lt;list [3]&gt;</span>  <span style="text-decoration: underline;">2</span>017 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   351<span style="text-decoration: underline;">244</span>801 2019-02-02 <span style="color: #949494;">11:39:37</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>015 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   351<span style="text-decoration: underline;">052</span>065 2019-02-01 <span style="color: #949494;">20:40:53</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>019 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   350<span style="text-decoration: underline;">315</span>345 2019-01-29 <span style="color: #949494;">15:48:37</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>014 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   350<span style="text-decoration: underline;">315</span>103 2019-01-29 <span style="color: #949494;">15:47:22</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>015 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   350<span style="text-decoration: underline;">314</span>507 2019-01-29 <span style="color: #949494;">15:44:08</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>017 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   350<span style="text-decoration: underline;">314</span>047 2019-01-29 <span style="color: #949494;">15:41:35</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>017 <span style="color: #BB0000;">NA</span>          <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 145 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 9 more variables: id...7 &lt;int&gt;, thumb &lt;chr&gt;, title &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   formats &lt;list&gt;, cover_image &lt;chr&gt;, resource_url &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   master_id &lt;int&gt;, id...14 &lt;int&gt;, rating &lt;int&gt;</span></span></span></code></pre></div>
<p>The problem is that <code>basic_information</code> repeats the
<code>id</code> column that’s also stored at the top-level, so we can
just drop that:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">discs</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">!</span><span class="va">id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">basic_information</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 155 × 14</span></span></span>
<span><span class="co">#&gt;    instance_id date_added          labels      year master_url  artists</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   354<span style="text-decoration: underline;">823</span>933 2019-02-16 <span style="color: #949494;">17:48:59</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>015 <span style="color: #BB0000;">NA</span>          <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   354<span style="text-decoration: underline;">092</span>601 2019-02-13 <span style="color: #949494;">14:13:11</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>013 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   354<span style="text-decoration: underline;">091</span>476 2019-02-13 <span style="color: #949494;">14:07:23</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>017 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   351<span style="text-decoration: underline;">244</span>906 2019-02-02 <span style="color: #949494;">11:39:58</span> <span style="color: #949494;">&lt;list [3]&gt;</span>  <span style="text-decoration: underline;">2</span>017 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   351<span style="text-decoration: underline;">244</span>801 2019-02-02 <span style="color: #949494;">11:39:37</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>015 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   351<span style="text-decoration: underline;">052</span>065 2019-02-01 <span style="color: #949494;">20:40:53</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>019 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   350<span style="text-decoration: underline;">315</span>345 2019-01-29 <span style="color: #949494;">15:48:37</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>014 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   350<span style="text-decoration: underline;">315</span>103 2019-01-29 <span style="color: #949494;">15:47:22</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>015 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   350<span style="text-decoration: underline;">314</span>507 2019-01-29 <span style="color: #949494;">15:44:08</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>017 https://ap… <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   350<span style="text-decoration: underline;">314</span>047 2019-01-29 <span style="color: #949494;">15:41:35</span> <span style="color: #949494;">&lt;list [1]&gt;</span>  <span style="text-decoration: underline;">2</span>017 <span style="color: #BB0000;">NA</span>          <span style="color: #949494;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 145 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: id &lt;int&gt;, thumb &lt;chr&gt;, title &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   formats &lt;list&gt;, cover_image &lt;chr&gt;, resource_url &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   master_id &lt;int&gt;, rating &lt;int&gt;</span></span></span></code></pre></div>
<p>Alternatively, we could use <code><a href="../reference/hoist.html">hoist()</a></code>:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">discs</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hoist.html">hoist</a></span><span class="op">(</span><span class="va">basic_information</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"title"</span>,</span>
<span>    year <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"labels"</span>, <span class="fl">1</span>, <span class="st">"name"</span><span class="op">)</span>,</span>
<span>    artist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"artists"</span>, <span class="fl">1</span>, <span class="st">"name"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 155 × 9</span></span></span>
<span><span class="co">#&gt;    instance_id date_added          title              year label artist</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   354<span style="text-decoration: underline;">823</span>933 2019-02-16 <span style="color: #949494;">17:48:59</span> Demo               <span style="text-decoration: underline;">2</span>015 Tobi… Mollot</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   354<span style="text-decoration: underline;">092</span>601 2019-02-13 <span style="color: #949494;">14:13:11</span> Observant Com El…  <span style="text-decoration: underline;">2</span>013 La V… Una B…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   354<span style="text-decoration: underline;">091</span>476 2019-02-13 <span style="color: #949494;">14:07:23</span> I                  <span style="text-decoration: underline;">2</span>017 La V… S.H.I…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   351<span style="text-decoration: underline;">244</span>906 2019-02-02 <span style="color: #949494;">11:39:58</span> Oído Absoluto      <span style="text-decoration: underline;">2</span>017 La V… Rata …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   351<span style="text-decoration: underline;">244</span>801 2019-02-02 <span style="color: #949494;">11:39:37</span> A Cat's Cause, N…  <span style="text-decoration: underline;">2</span>015 Kato… Ivy (…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   351<span style="text-decoration: underline;">052</span>065 2019-02-01 <span style="color: #949494;">20:40:53</span> Tashme             <span style="text-decoration: underline;">2</span>019 High… Tashme</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   350<span style="text-decoration: underline;">315</span>345 2019-01-29 <span style="color: #949494;">15:48:37</span> Demo               <span style="text-decoration: underline;">2</span>014 Mind… Desgr…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   350<span style="text-decoration: underline;">315</span>103 2019-01-29 <span style="color: #949494;">15:47:22</span> Let The Miracles…  <span style="text-decoration: underline;">2</span>015 Not … Phant…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   350<span style="text-decoration: underline;">314</span>507 2019-01-29 <span style="color: #949494;">15:44:08</span> Sub Space          <span style="text-decoration: underline;">2</span>017 Not … Sub S…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   350<span style="text-decoration: underline;">314</span>047 2019-01-29 <span style="color: #949494;">15:41:35</span> Demo               <span style="text-decoration: underline;">2</span>017 Pres… Small…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 145 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: basic_information &lt;list&gt;, id &lt;int&gt;, rating &lt;int&gt;</span></span></span></code></pre></div>
<p>Here I quickly extract the name of the first label and artist by
indexing deeply into the nested list.</p>
<p>A more systematic approach would be to create separate tables for
artist and label:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">discs</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hoist.html">hoist</a></span><span class="op">(</span><span class="va">basic_information</span>, artist <span class="op">=</span> <span class="st">"artists"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>disc_id <span class="op">=</span> <span class="va">id</span>, <span class="va">artist</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_longer.html">unnest_longer</a></span><span class="op">(</span><span class="va">artist</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">artist</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 167 × 8</span></span></span>
<span><span class="co">#&gt;     disc_id join  name           anv   tracks role  resource_url     id</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  7<span style="text-decoration: underline;">496</span>378 <span style="color: #949494;">""</span>    Mollot         <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     <span style="color: #949494;">""</span>    https://api… 4.62<span style="color: #949494;">e</span>6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  4<span style="text-decoration: underline;">490</span>852 <span style="color: #949494;">""</span>    Una Bèstia In… <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     <span style="color: #949494;">""</span>    https://api… 3.19<span style="color: #949494;">e</span>6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  9<span style="text-decoration: underline;">827</span>276 <span style="color: #949494;">""</span>    S.H.I.T. (3)   <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     <span style="color: #949494;">""</span>    https://api… 2.77<span style="color: #949494;">e</span>6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  9<span style="text-decoration: underline;">769</span>203 <span style="color: #949494;">""</span>    Rata Negra     <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     <span style="color: #949494;">""</span>    https://api… 4.28<span style="color: #949494;">e</span>6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  7<span style="text-decoration: underline;">237</span>138 <span style="color: #949494;">""</span>    Ivy (18)       <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     <span style="color: #949494;">""</span>    https://api… 3.60<span style="color: #949494;">e</span>6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 13<span style="text-decoration: underline;">117</span>042 <span style="color: #949494;">""</span>    Tashme         <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     <span style="color: #949494;">""</span>    https://api… 5.21<span style="color: #949494;">e</span>6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  7<span style="text-decoration: underline;">113</span>575 <span style="color: #949494;">""</span>    Desgraciados   <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     <span style="color: #949494;">""</span>    https://api… 4.45<span style="color: #949494;">e</span>6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 10<span style="text-decoration: underline;">540</span>713 <span style="color: #949494;">""</span>    Phantom Head   <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     <span style="color: #949494;">""</span>    https://api… 4.27<span style="color: #949494;">e</span>6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 11<span style="text-decoration: underline;">260</span>950 <span style="color: #949494;">""</span>    Sub Space (2)  <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     <span style="color: #949494;">""</span>    https://api… 5.69<span style="color: #949494;">e</span>6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 11<span style="text-decoration: underline;">726</span>853 <span style="color: #949494;">""</span>    Small Man (2)  <span style="color: #949494;">""</span>    <span style="color: #949494;">""</span>     <span style="color: #949494;">""</span>    https://api… 6.37<span style="color: #949494;">e</span>6</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 157 more rows</span></span></span>
<span></span>
<span><span class="va">discs</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hoist.html">hoist</a></span><span class="op">(</span><span class="va">basic_information</span>, format <span class="op">=</span> <span class="st">"formats"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>disc_id <span class="op">=</span> <span class="va">id</span>, <span class="va">format</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_longer.html">unnest_longer</a></span><span class="op">(</span><span class="va">format</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_wider.html">unnest_wider</a></span><span class="op">(</span><span class="va">format</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/unnest_longer.html">unnest_longer</a></span><span class="op">(</span><span class="va">descriptions</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 258 × 5</span></span></span>
<span><span class="co">#&gt;     disc_id descriptions text  name     qty  </span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  7<span style="text-decoration: underline;">496</span>378 <span style="color: #949494;">"</span>Numbered<span style="color: #949494;">"</span>   Black Cassette 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  4<span style="text-decoration: underline;">490</span>852 <span style="color: #949494;">"</span>LP<span style="color: #949494;">"</span>         <span style="color: #BB0000;">NA</span>    Vinyl    1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  9<span style="text-decoration: underline;">827</span>276 <span style="color: #949494;">"</span>7\"<span style="color: #949494;">"</span>        <span style="color: #BB0000;">NA</span>    Vinyl    1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  9<span style="text-decoration: underline;">827</span>276 <span style="color: #949494;">"</span>45 RPM<span style="color: #949494;">"</span>     <span style="color: #BB0000;">NA</span>    Vinyl    1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  9<span style="text-decoration: underline;">827</span>276 <span style="color: #949494;">"</span>EP<span style="color: #949494;">"</span>         <span style="color: #BB0000;">NA</span>    Vinyl    1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  9<span style="text-decoration: underline;">769</span>203 <span style="color: #949494;">"</span>LP<span style="color: #949494;">"</span>         <span style="color: #BB0000;">NA</span>    Vinyl    1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  9<span style="text-decoration: underline;">769</span>203 <span style="color: #949494;">"</span>Album<span style="color: #949494;">"</span>      <span style="color: #BB0000;">NA</span>    Vinyl    1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  7<span style="text-decoration: underline;">237</span>138 <span style="color: #949494;">"</span>7\"<span style="color: #949494;">"</span>        <span style="color: #BB0000;">NA</span>    Vinyl    1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  7<span style="text-decoration: underline;">237</span>138 <span style="color: #949494;">"</span>45 RPM<span style="color: #949494;">"</span>     <span style="color: #BB0000;">NA</span>    Vinyl    1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 13<span style="text-decoration: underline;">117</span>042 <span style="color: #949494;">"</span>7\"<span style="color: #949494;">"</span>        <span style="color: #BB0000;">NA</span>    Vinyl    1    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 248 more rows</span></span></span></code></pre></div>
<p>Then you could join these back on to the original dataset as
needed.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, Maximilian Girlich, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer>
</body>
</html>
